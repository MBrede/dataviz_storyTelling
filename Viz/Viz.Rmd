---
title: "Visualisierung"
output:
  # pdf_document:
  #   includes:
  #     in_header: header_doc.tex
  html_document:
    css: styles.css
    fig_caption: true
    toc: true
---

```{r setup, include=FALSE}
# test
library(knitr)
library(kableExtra)
library(tidyverse)

opts_chunk$set(echo = TRUE,fig.align = 'center')

theme_set(theme_light())
```

## Viz 1

Vergleich Schweden Deutschland - Indizienden oder positiv-Tests oder relative Fallzahlen oder alles (timeseries) [Inzidenz- und Testdaten](https://covid.ourworldindata.org/data/owid-covid-data.csv)

## Attaining the data
For attaining the covid-19 policy data we read the data from the github of the
[Coronavirus Government Response Tracker Project](https://www.bsg.ox.ac.uk/research/research-projects/coronavirus-government-response-tracker#data).

```{r, cache=TRUE}
# read policies csv-file
policies <- read.csv('https://raw.githubusercontent.com/OxCGRT/covid-policy-tracker/master/data/OxCGRT_latest.csv')
```

After reading the data, we take a glimpse on the data.
```{r}
# take a glimpse of the policy data
glimpse(policies)
```
For the meanings of specific policies take a look on the [Codebook](https://github.com/OxCGRT/covid-policy-tracker/blob/master/documentation/codebook.md) of the project.


The data set gets filtered for german policies and the relevant policies get selected.

```{r}

policies_ger <- policies %>%
                filter(CountryName=='Germany') %>% # filter policies by germany
                select(CountryCode, Date, C8_International.travel.controls,
                       C6_Stay.at.home.requirements, C3_Cancel.public.events,
                       C4_Restrictions.on.gatherings, H2_Testing.policy,
                       H3_Contact.tracing) %>% # select policies of interest
                arrange(Date) # order rows by date

#policy_intervals <- function(policy_data) {
  

library(magrittr)

travel_controls <- policies_ger %>% select(Date, C8_International.travel.controls)

timeline_df <- data.frame('begin'=NA, 'end'=NA, 'category'=NA)

travel_controls %<>% mutate(Date=as.Date(as.character(Date), format = "%Y%m%d"))

travel_controls %>% group_by(C8_International.travel.controls)

lagandlead

# timeline_counter <- 1

# last_row = -1
# start = TRUE

# for (row in 1:nrow(travel_controls)){
#   # if policy changed
#   if(travel_controls[row, 'C8_International.travel.controls'] != last_row){
#     if(start){
#       timeline_df[timeline_counter][timeline_counter] <- travel_controls[row,'C8_International.travel.controls']
#       start <- FALSE
#       timeline_counter <- timeline_counter + 1
#     }
#     last_row <- row
#   }
# }
# 
# travel_controls[row, 'C8_International.travel.controls']# == last_row

```


```{r}
# convert numerical classes into text


```

```{r}
# filter policies by sweden

```

Zeitreihen in Facets, [Massnahmen](https://raw.githubusercontent.com/OxCGRT/covid-policy-tracker/master/data/OxCGRT_latest.csv) 

## Viz 2

Zeitreihen Zeitungsartikel 

## Viz 3

Wordclouds fÃ¼r interessante Zeitpunkte

