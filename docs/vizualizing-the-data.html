<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Vizualizing the data | Comparison of Narratives between German and Swedish News Articles during the COVID-19 Pandemic</title>
  <meta name="description" content="Our results for the dataviz-assignment." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Vizualizing the data | Comparison of Narratives between German and Swedish News Articles during the COVID-19 Pandemic" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Our results for the dataviz-assignment." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Vizualizing the data | Comparison of Narratives between German and Swedish News Articles during the COVID-19 Pandemic" />
  
  <meta name="twitter:description" content="Our results for the dataviz-assignment." />
  

<meta name="author" content="Max Brede und Janik Dunker" />


<meta name="date" content="2021-01-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-acquisition.html"/>
<link rel="next" href="references.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.16/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DataViz-Assignment</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="data-acquisition.html"><a href="data-acquisition.html"><i class="fa fa-check"></i>Data Acquisition</a>
<ul>
<li class="chapter" data-level="" data-path="data-acquisition.html"><a href="data-acquisition.html#sources-for-news-articles"><i class="fa fa-check"></i>Sources for News-Articles</a></li>
<li class="chapter" data-level="" data-path="data-acquisition.html"><a href="data-acquisition.html#news-articles"><i class="fa fa-check"></i>News Articles</a></li>
<li class="chapter" data-level="" data-path="data-acquisition.html"><a href="data-acquisition.html#sentiments"><i class="fa fa-check"></i>Sentiments</a></li>
<li class="chapter" data-level="" data-path="data-acquisition.html"><a href="data-acquisition.html#policy-data"><i class="fa fa-check"></i>Policy data</a></li>
<li class="chapter" data-level="" data-path="data-acquisition.html"><a href="data-acquisition.html#incidence-data"><i class="fa fa-check"></i>Incidence data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vizualizing-the-data.html"><a href="vizualizing-the-data.html"><i class="fa fa-check"></i>Vizualizing the data</a>
<ul>
<li class="chapter" data-level="" data-path="vizualizing-the-data.html"><a href="vizualizing-the-data.html#policies-and-cases"><i class="fa fa-check"></i>Policies and Cases</a></li>
<li class="chapter" data-level="" data-path="vizualizing-the-data.html"><a href="vizualizing-the-data.html#amount-of-reports"><i class="fa fa-check"></i>Amount of reports</a></li>
<li class="chapter" data-level="" data-path="vizualizing-the-data.html"><a href="vizualizing-the-data.html#sentiments-1"><i class="fa fa-check"></i>Sentiments</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Lizenzvertrag" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Comparison of Narratives between German and Swedish News Articles during the COVID-19 Pandemic</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="vizualizing-the-data" class="section level1">
<h1>Vizualizing the data</h1>
<div id="policies-and-cases" class="section level2">
<h2>Policies and Cases</h2>
<p>Since our main goal is to see if media coverage differs in countries with different reactions to the pandemic, the first step is to analyse whether Swedish and German reactions and case numbers actually differ.</p>
<p>First off we want to show how the situations of new confirmed cases and the
corresponding policies differ between the two countries. This is to see, whether the countriesâ€™ responses do differ as is communicated in German media.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="vizualizing-the-data.html#cb31-1" aria-hidden="true" tabindex="-1"></a>limits <span class="ot">&lt;-</span>  <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&#39;2020-01-01&#39;</span>, <span class="st">&#39;2020-12-31&#39;</span>))</span>
<span id="cb31-2"><a href="vizualizing-the-data.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co"># read the timeline data from the csv-file</span></span>
<span id="cb31-3"><a href="vizualizing-the-data.html#cb31-3" aria-hidden="true" tabindex="-1"></a>timeline_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;./../data/timeline_data.csv&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="vizualizing-the-data.html#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">start =</span> <span class="fu">as.Date</span>(start, <span class="at">format =</span> <span class="st">&quot;%Y-%m-%d&quot;</span>),</span>
<span id="cb31-5"><a href="vizualizing-the-data.html#cb31-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">end =</span> <span class="fu">as.Date</span>(end, <span class="at">format =</span> <span class="st">&quot;%Y-%m-%d&quot;</span>))</span>
<span id="cb31-6"><a href="vizualizing-the-data.html#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co"># determine range of events</span></span>
<span id="cb31-7"><a href="vizualizing-the-data.html#cb31-7" aria-hidden="true" tabindex="-1"></a>event_range <span class="ot">&lt;-</span> timeline_data <span class="sc">%&gt;%</span> <span class="fu">select</span>(event) <span class="sc">%&gt;%</span> <span class="fu">range</span>()</span>
<span id="cb31-8"><a href="vizualizing-the-data.html#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="co"># build color map depending on the range of events</span></span>
<span id="cb31-9"><a href="vizualizing-the-data.html#cb31-9" aria-hidden="true" tabindex="-1"></a>color_map <span class="ot">&lt;-</span> <span class="fu">rev</span>(<span class="fu">viridis</span>(event_range[<span class="dv">2</span>]<span class="sc">+</span><span class="dv">1</span>))</span>
<span id="cb31-10"><a href="vizualizing-the-data.html#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="co"># add column color and event for specific policy and corresponding policy</span></span>
<span id="cb31-11"><a href="vizualizing-the-data.html#cb31-11" aria-hidden="true" tabindex="-1"></a>timeline_data <span class="sc">%&lt;&gt;%</span> <span class="fu">mutate</span>(<span class="at">color =</span> color_map[<span class="fu">as.integer</span>(event)<span class="sc">+</span><span class="dv">4</span>]) <span class="sc">%&gt;%</span></span>
<span id="cb31-12"><a href="vizualizing-the-data.html#cb31-12" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">mutate</span>(<span class="at">event =</span> <span class="fu">as.character</span>(event))</span>
<span id="cb31-13"><a href="vizualizing-the-data.html#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="co"># build time line plot for the Restriction of gatherings policy</span></span>
<span id="cb31-14"><a href="vizualizing-the-data.html#cb31-14" aria-hidden="true" tabindex="-1"></a>time_line_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(timeline_data, <span class="fu">aes</span>(<span class="at">x=</span>start, <span class="at">xend=</span>end, <span class="at">y=</span>group, <span class="at">yend=</span>group, <span class="at">color=</span>event)) <span class="sc">+</span></span>
<span id="cb31-15"><a href="vizualizing-the-data.html#cb31-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">size=</span><span class="dv">10</span>,) <span class="sc">+</span></span>
<span id="cb31-16"><a href="vizualizing-the-data.html#cb31-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&#39;no restrictions&#39;</span>, <span class="st">&#39;above 1000 people&#39;</span>,<span class="st">&#39;101-1000 people&#39;</span>, <span class="st">&#39;11-100 people&#39;</span>, <span class="st">&#39;10 people or less&#39;</span>), <span class="at">values =</span> color_map) <span class="sc">+</span></span>
<span id="cb31-17"><a href="vizualizing-the-data.html#cb31-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Date&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Country&#39;</span>,</span>
<span id="cb31-18"><a href="vizualizing-the-data.html#cb31-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">colour=</span><span class="st">&quot;Restrictions on</span><span class="sc">\n</span><span class="st"> gatherings&quot;</span>) <span class="sc">+</span></span>
<span id="cb31-19"><a href="vizualizing-the-data.html#cb31-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">limits =</span> limits)</span></code></pre></div>
<p>After having the policy time line for Germany and Sweden the time-series for the
normalized new cases gets added:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="vizualizing-the-data.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read the time-series data from the csv-file</span></span>
<span id="cb32-2"><a href="vizualizing-the-data.html#cb32-2" aria-hidden="true" tabindex="-1"></a>timeseries_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;./../data/timeseries_data.csv&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="vizualizing-the-data.html#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">as.Date</span>(date, <span class="at">format =</span> <span class="st">&quot;%Y-%m-%d&quot;</span>)) <span class="co"># change data type to date</span></span>
<span id="cb32-4"><a href="vizualizing-the-data.html#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># define colors for time series plot</span></span>
<span id="cb32-5"><a href="vizualizing-the-data.html#cb32-5" aria-hidden="true" tabindex="-1"></a>COLORS <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">Germany =</span> <span class="st">&quot;steelblue&quot;</span>, <span class="at">Sweden =</span><span class="st">&quot;darkred&quot;</span>)</span>
<span id="cb32-6"><a href="vizualizing-the-data.html#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co"># build time-series plot</span></span>
<span id="cb32-7"><a href="vizualizing-the-data.html#cb32-7" aria-hidden="true" tabindex="-1"></a>lineplot <span class="ot">&lt;-</span> timeseries_data <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> new_cases_smoothed_per_million,</span>
<span id="cb32-8"><a href="vizualizing-the-data.html#cb32-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">group =</span> location, <span class="at">color =</span> location)) <span class="sc">+</span></span>
<span id="cb32-9"><a href="vizualizing-the-data.html#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb32-10"><a href="vizualizing-the-data.html#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> COLORS) <span class="sc">+</span></span>
<span id="cb32-11"><a href="vizualizing-the-data.html#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Smoothed New Cases</span><span class="sc">\n</span><span class="st"> per</span><span class="sc">\n</span><span class="st"> Million&#39;</span>,</span>
<span id="cb32-12"><a href="vizualizing-the-data.html#cb32-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">colour=</span><span class="st">&quot;Countries&quot;</span>,</span>
<span id="cb32-13"><a href="vizualizing-the-data.html#cb32-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Time Series of New Cases and Restrictions on Gatherings&quot;</span>) <span class="sc">+</span></span>
<span id="cb32-14"><a href="vizualizing-the-data.html#cb32-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">limits =</span> limits)<span class="sc">+</span></span>
<span id="cb32-15"><a href="vizualizing-the-data.html#cb32-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>,<span class="at">face =</span> <span class="st">&#39;bold&#39;</span>))</span></code></pre></div>
<p>We plot the data as subplots by the cowplot library:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="vizualizing-the-data.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_grid</span>(lineplot, time_line_plot,</span>
<span id="cb33-2"><a href="vizualizing-the-data.html#cb33-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">align=</span><span class="st">&#39;v&#39;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-31"></span>
<img src="DataVizAssignment_files/figure-html/unnamed-chunk-31-1.png" alt="Time-series of smoothed new cases and restrictions on gatherings." width="672" />
<p class="caption">
Figure 1: Time-series of smoothed new cases and restrictions on gatherings.
</p>
</div>
<p>After cleaning the data and building the plot, we retrieve a subplot
consisting of a time series of the smoothed new cases per million of COVID-19
for Germany and Sweden. As a comparison, we plotted the corresponding policies
Germany and Sweden released in respect to restrictions on gatherings.</p>
<p>That said we want to go into how situations in Germany and Sweden changed and
how the countries reacted to those. Especially of interest was the time before
the pandemic peak in Germany in April. Both countries started on restricting
gatherings. Germany reduced the allowed gatherings of 1000 people, while Sweden
was restricting it to 101-1000 people. After approximately a week Germany went into
a lockdown, while Sweden reduced the number of allowed people in a gathering to
11-100. This policy was kept by the Swedish Government until recently.
While the German federal governments tried to lighten the policies during late summer, those attempts have been overthrown with the increasing number of new cases though.</p>
<p>This shows that Sweden chose way lighter policies with respect to gatherings
than Germany even with a way higher number of new confirmed cases.</p>
<p>So that we were asking ourself how this affected the narrative of the two countries
to each other. The idea was to compare the news reports of the countries over
each other.</p>
</div>
<div id="amount-of-reports" class="section level2">
<h2>Amount of reports</h2>
<p>Since the crisis-response seems to be different and we got the impression of the
use of Sweden as a bad example in German media, we wanted to see, whether the
reporting in both countries about the respective other differed as well.
The first aspect we found interesting, was the amount of articles over time.</p>
<p>Since we expect a coupling of case numbers and number of articles, weâ€™ll try to compare those. To make the comparison easier, weâ€™ll scale all values so that the relative maximum in the time frame is set to 100%. Due to rate limiting, we do only have article counts until the end of November.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="vizualizing-the-data.html#cb34-1" aria-hidden="true" tabindex="-1"></a>sentiment_time_series <span class="ot">&lt;-</span></span>
<span id="cb34-2"><a href="vizualizing-the-data.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_rds</span>(<span class="st">&#39;./../data/documents_with_sentiments.rds&#39;</span>) <span class="sc">%&gt;%</span> <span class="co"># import data</span></span>
<span id="cb34-3"><a href="vizualizing-the-data.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">publish_date =</span> lubridate<span class="sc">::</span><span class="fu">as_date</span>(<span class="fu">as.Date</span>(publish_date))) <span class="sc">%&gt;%</span> <span class="co"># fix dates</span></span>
<span id="cb34-4"><a href="vizualizing-the-data.html#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country, publish_date) <span class="sc">%&gt;%</span></span>
<span id="cb34-5"><a href="vizualizing-the-data.html#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="st">&#39;number of articles&#39;</span> <span class="ot">=</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="co"># summarise data</span></span>
<span id="cb34-6"><a href="vizualizing-the-data.html#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-7"><a href="vizualizing-the-data.html#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb34-8"><a href="vizualizing-the-data.html#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_split</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-9"><a href="vizualizing-the-data.html#cb34-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">mutate</span>(., <span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="dv">100</span> <span class="sc">*</span> . <span class="sc">/</span> <span class="fu">max</span>(.)))) <span class="sc">%&gt;%</span> <span class="co"># scale all data to a max of 100% </span></span>
<span id="cb34-10"><a href="vizualizing-the-data.html#cb34-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>( <span class="sc">~</span> <span class="fu">mutate</span>(., <span class="fu">across</span>(</span>
<span id="cb34-11"><a href="vizualizing-the-data.html#cb34-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">where</span>(is.numeric),</span>
<span id="cb34-12"><a href="vizualizing-the-data.html#cb34-12" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> stats<span class="sc">::</span><span class="fu">filter</span>(., <span class="at">filter =</span> <span class="fu">dnorm</span>(<span class="fu">seq</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="at">length.out =</span> <span class="dv">7</span>)) <span class="sc">/</span></span>
<span id="cb34-13"><a href="vizualizing-the-data.html#cb34-13" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">sum</span>(<span class="fu">dnorm</span>(</span>
<span id="cb34-14"><a href="vizualizing-the-data.html#cb34-14" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="at">length.out =</span> <span class="dv">7</span>)</span>
<span id="cb34-15"><a href="vizualizing-the-data.html#cb34-15" aria-hidden="true" tabindex="-1"></a>                      ))),</span>
<span id="cb34-16"><a href="vizualizing-the-data.html#cb34-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">.names =</span> <span class="st">&#39;filter_{.col}&#39;</span></span>
<span id="cb34-17"><a href="vizualizing-the-data.html#cb34-17" aria-hidden="true" tabindex="-1"></a>  ))) <span class="sc">%&gt;%</span> <span class="co"># add a column with gaussian low-pass filtered data</span></span>
<span id="cb34-18"><a href="vizualizing-the-data.html#cb34-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">&#39;original_number of articles&#39;</span> <span class="ot">=</span> <span class="st">&#39;number of articles&#39;</span>) <span class="sc">%&gt;%</span> <span class="co"># nicer names</span></span>
<span id="cb34-19"><a href="vizualizing-the-data.html#cb34-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb34-20"><a href="vizualizing-the-data.html#cb34-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">where</span>(is.numeric),</span>
<span id="cb34-21"><a href="vizualizing-the-data.html#cb34-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&#39;value&#39;</span>,</span>
<span id="cb34-22"><a href="vizualizing-the-data.html#cb34-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">&#39;quality&#39;</span>, <span class="st">&#39;indicator&#39;</span>),</span>
<span id="cb34-23"><a href="vizualizing-the-data.html#cb34-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">&#39;_&#39;</span></span>
<span id="cb34-24"><a href="vizualizing-the-data.html#cb34-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb34-25"><a href="vizualizing-the-data.html#cb34-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> quality,</span>
<span id="cb34-26"><a href="vizualizing-the-data.html#cb34-26" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> value) <span class="co"># rejig to have a nicer format for the plot</span></span>
<span id="cb34-27"><a href="vizualizing-the-data.html#cb34-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-28"><a href="vizualizing-the-data.html#cb34-28" aria-hidden="true" tabindex="-1"></a>timeseries_data <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb34-29"><a href="vizualizing-the-data.html#cb34-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(location) <span class="sc">%&gt;%</span> </span>
<span id="cb34-30"><a href="vizualizing-the-data.html#cb34-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_split</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb34-31"><a href="vizualizing-the-data.html#cb34-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(<span class="sc">~</span><span class="fu">mutate</span>(., <span class="at">cases =</span> <span class="dv">100</span> <span class="sc">*</span> new_cases_smoothed_per_million<span class="sc">/</span><span class="fu">max</span>(new_cases_smoothed_per_million))) <span class="co"># scale incidence data to a max of 100% </span></span>
<span id="cb34-32"><a href="vizualizing-the-data.html#cb34-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-33"><a href="vizualizing-the-data.html#cb34-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-34"><a href="vizualizing-the-data.html#cb34-34" aria-hidden="true" tabindex="-1"></a>article_timeseries_viz <span class="ot">&lt;-</span> </span>
<span id="cb34-35"><a href="vizualizing-the-data.html#cb34-35" aria-hidden="true" tabindex="-1"></a>  sentiment_time_series <span class="sc">%&gt;%</span> </span>
<span id="cb34-36"><a href="vizualizing-the-data.html#cb34-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country =</span> <span class="fu">recode</span>(country,</span>
<span id="cb34-37"><a href="vizualizing-the-data.html#cb34-37" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Germany =</span> <span class="st">&#39;German news </span><span class="sc">\n</span><span class="st"> about Sweden&#39;</span>,</span>
<span id="cb34-38"><a href="vizualizing-the-data.html#cb34-38" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Sweden =</span> <span class="st">&#39;Swedish news </span><span class="sc">\n</span><span class="st"> about Germany&#39;</span>)) <span class="sc">%&gt;%</span> <span class="co"># nicer facet-names</span></span>
<span id="cb34-39"><a href="vizualizing-the-data.html#cb34-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> publish_date, <span class="at">y =</span> original)) <span class="sc">+</span></span>
<span id="cb34-40"><a href="vizualizing-the-data.html#cb34-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> scales<span class="sc">::</span><span class="fu">muted</span>(<span class="st">&#39;blue&#39;</span>), <span class="at">alpha =</span> .<span class="dv">1</span>) <span class="sc">+</span> <span class="co"># add the article counts per day</span></span>
<span id="cb34-41"><a href="vizualizing-the-data.html#cb34-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> filter), <span class="at">color =</span> scales<span class="sc">::</span><span class="fu">muted</span>(<span class="st">&#39;blue&#39;</span>)) <span class="sc">+</span> <span class="co"># add the smoothed article counts</span></span>
<span id="cb34-42"><a href="vizualizing-the-data.html#cb34-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(country),<span class="at">scales =</span> <span class="st">&#39;fixed&#39;</span>) <span class="sc">+</span> <span class="co"># display in facets</span></span>
<span id="cb34-43"><a href="vizualizing-the-data.html#cb34-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> timeseries_data, <span class="fu">aes</span>(<span class="at">y =</span> cases, <span class="at">x =</span> date, <span class="at">color =</span> location)) <span class="sc">+</span> <span class="co"># add incidence</span></span>
<span id="cb34-44"><a href="vizualizing-the-data.html#cb34-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> COLORS) <span class="sc">+</span> <span class="co"># use colors from earlier</span></span>
<span id="cb34-45"><a href="vizualizing-the-data.html#cb34-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&#39;bottom&#39;</span>, <span class="co"># legend to bottom</span></span>
<span id="cb34-46"><a href="vizualizing-the-data.html#cb34-46" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>,<span class="at">face =</span> <span class="st">&#39;bold&#39;</span>)) <span class="sc">+</span></span>
<span id="cb34-47"><a href="vizualizing-the-data.html#cb34-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Date of Publication&#39;</span>,  <span class="co"># nicer axis and plot title</span></span>
<span id="cb34-48"><a href="vizualizing-the-data.html#cb34-48" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;New cases and articles in % of Maximum&#39;</span>,</span>
<span id="cb34-49"><a href="vizualizing-the-data.html#cb34-49" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&#39;New Covid-19 cases:&#39;</span>,</span>
<span id="cb34-50"><a href="vizualizing-the-data.html#cb34-50" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;News articles and new cases in Sweden and Germany&#39;</span>) <span class="sc">+</span></span>
<span id="cb34-51"><a href="vizualizing-the-data.html#cb34-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">limits =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&#39;2020-01-01&#39;</span>, <span class="st">&#39;2020-11-20&#39;</span>))) <span class="co"># limit dates</span></span>
<span id="cb34-52"><a href="vizualizing-the-data.html#cb34-52" aria-hidden="true" tabindex="-1"></a>article_timeseries_viz</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-32"></span>
<img src="DataVizAssignment_files/figure-html/unnamed-chunk-32-1.png" alt="Total amount of articles per day concerning the respective other country are displayed as points, the seven-day moving gaussian average of the amount is depicted by the dark blue line. The dashed lines depict the case numbers per 1.000.000 Inhabitants." width="672" />
<p class="caption">
Figure 2: Total amount of articles per day concerning the respective other country are displayed as points, the seven-day moving gaussian average of the amount is depicted by the dark blue line. The dashed lines depict the case numbers per 1.000.000 Inhabitants.
</p>
</div>
<p>By comparing these time-series with the infection-rates, one can recognize signs of a similarity in the number of German mentions of Sweden and Corona and the amount of cases in Sweden. Since the amount of articles seems to loosely be coupled to the amount of cases in the respective other country, we will look at the content of these reports. It seems interesting, whether these reports are purely factual, or if some emotional loading can be detected.</p>
</div>
<div id="sentiments-1" class="section level2">
<h2>Sentiments</h2>
<p>Letâ€™s start by using the rather patchy sentiments we were able to gather to generate a few maps of the regions of both countries depicting the respective tonality.</p>
<p>So letâ€™s first load the data and the countriesâ€™ outlines:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="vizualizing-the-data.html#cb35-1" aria-hidden="true" tabindex="-1"></a>sf_data <span class="ot">&lt;-</span> <span class="fu">get_eurostat_geospatial</span>(<span class="at">resolution =</span> <span class="st">&#39;10&#39;</span>, <span class="co"># get the nice looking european geo data</span></span>
<span id="cb35-2"><a href="vizualizing-the-data.html#cb35-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">nuts =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="vizualizing-the-data.html#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(CNTR_CODE <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;SE&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb35-4"><a href="vizualizing-the-data.html#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(<span class="fu">get_eurostat_geospatial</span>(<span class="at">resolution =</span> <span class="st">&#39;10&#39;</span>,</span>
<span id="cb35-5"><a href="vizualizing-the-data.html#cb35-5" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">nuts =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-6"><a href="vizualizing-the-data.html#cb35-6" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(CNTR_CODE <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;DE&#39;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb35-7"><a href="vizualizing-the-data.html#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NAME_LATN =</span> <span class="fu">str_to_lower</span>(NAME_LATN))</span>
<span id="cb35-8"><a href="vizualizing-the-data.html#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="vizualizing-the-data.html#cb35-9" aria-hidden="true" tabindex="-1"></a>se_countrycodes <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">&#39;https://www.iso.org/obp/ui/#iso:code:3166:SE&#39;</span>) <span class="co"># get the country codes</span></span>
<span id="cb35-10"><a href="vizualizing-the-data.html#cb35-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-11"><a href="vizualizing-the-data.html#cb35-11" aria-hidden="true" tabindex="-1"></a>regional_sents <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&#39;./../data/documents_with_sentiments.rds&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-12"><a href="vizualizing-the-data.html#cb35-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span> </span>
<span id="cb35-13"><a href="vizualizing-the-data.html#cb35-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_split</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb35-14"><a href="vizualizing-the-data.html#cb35-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(<span class="sc">~</span><span class="fu">group_by</span>(.,pub_state,country) <span class="sc">%&gt;%</span>  </span>
<span id="cb35-15"><a href="vizualizing-the-data.html#cb35-15" aria-hidden="true" tabindex="-1"></a>            <span class="fu">summarise</span>(<span class="at">sentiment =</span> <span class="fu">mean</span>(m_sentiment))) <span class="co"># get the sentiments per state</span></span></code></pre></div>
<p>Now we need to cross-reference the Mediacloud countrycodes (ISO 3166:SE, ISO 3166:DE) with the <code>eurostat</code> ones:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="vizualizing-the-data.html#cb36-1" aria-hidden="true" tabindex="-1"></a>iso_3166 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&#39;./../data/regional_codes.csv&#39;</span>) <span class="sc">%&gt;%</span>  <span class="co"># add regional codes to make data sets joinable</span></span>
<span id="cb36-2"><a href="vizualizing-the-data.html#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">str_trim</span>(.)))<span class="sc">%&gt;%</span> </span>
<span id="cb36-3"><a href="vizualizing-the-data.html#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Provinz =</span> <span class="fu">str_to_lower</span>(Provinz))</span>
<span id="cb36-4"><a href="vizualizing-the-data.html#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="vizualizing-the-data.html#cb36-5" aria-hidden="true" tabindex="-1"></a>regional_sents <span class="sc">%&lt;&gt;%</span></span>
<span id="cb36-6"><a href="vizualizing-the-data.html#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(iso_3166, <span class="at">by =</span> <span class="fu">c</span>(<span class="at">pub_state =</span> <span class="st">&#39;Code&#39;</span>)) <span class="co"># and join</span></span></code></pre></div>
<p>This dataset can now be used to depict the overall regional sentiment in both countries:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="vizualizing-the-data.html#cb37-1" aria-hidden="true" tabindex="-1"></a>reg_sent_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(data,legend, <span class="at">title =</span> <span class="st">&#39;&#39;</span>){ <span class="co"># function to plot regional sentiments</span></span>
<span id="cb37-2"><a href="vizualizing-the-data.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data) <span class="sc">+</span></span>
<span id="cb37-3"><a href="vizualizing-the-data.html#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">geometry =</span> geometry,<span class="at">fill =</span> sentiment), <span class="at">color =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">expand =</span> F) <span class="sc">+</span></span>
<span id="cb37-4"><a href="vizualizing-the-data.html#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_gradient2</span>(<span class="at">low =</span> scales<span class="sc">::</span><span class="fu">muted</span>(<span class="st">&#39;red&#39;</span>), </span>
<span id="cb37-5"><a href="vizualizing-the-data.html#cb37-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">mid =</span> <span class="st">&#39;white&#39;</span>,</span>
<span id="cb37-6"><a href="vizualizing-the-data.html#cb37-6" aria-hidden="true" tabindex="-1"></a>                         <span class="at">high =</span> scales<span class="sc">::</span><span class="fu">muted</span>(<span class="st">&#39;blue&#39;</span>),</span>
<span id="cb37-7"><a href="vizualizing-the-data.html#cb37-7" aria-hidden="true" tabindex="-1"></a>                         <span class="at">na.value =</span> <span class="st">&#39;lightgrey&#39;</span>,</span>
<span id="cb37-8"><a href="vizualizing-the-data.html#cb37-8" aria-hidden="true" tabindex="-1"></a>                         <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>,<span class="dv">5</span>))   <span class="sc">+</span></span>
<span id="cb37-9"><a href="vizualizing-the-data.html#cb37-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>()</span>
<span id="cb37-10"><a href="vizualizing-the-data.html#cb37-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span>legend){</span>
<span id="cb37-11"><a href="vizualizing-the-data.html#cb37-11" aria-hidden="true" tabindex="-1"></a>      p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&#39;none&#39;</span>)</span>
<span id="cb37-12"><a href="vizualizing-the-data.html#cb37-12" aria-hidden="true" tabindex="-1"></a>    }<span class="cf">else</span>{</span>
<span id="cb37-13"><a href="vizualizing-the-data.html#cb37-13" aria-hidden="true" tabindex="-1"></a>      p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme_void</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&#39;right&#39;</span>)</span>
<span id="cb37-14"><a href="vizualizing-the-data.html#cb37-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb37-15"><a href="vizualizing-the-data.html#cb37-15" aria-hidden="true" tabindex="-1"></a>  p <span class="sc">+</span></span>
<span id="cb37-16"><a href="vizualizing-the-data.html#cb37-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_sf</span>(<span class="at">crs =</span> <span class="fu">st_crs</span>(<span class="st">&quot;+proj=merc&quot;</span>)) <span class="sc">+</span></span>
<span id="cb37-17"><a href="vizualizing-the-data.html#cb37-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> title) <span class="sc">+</span></span>
<span id="cb37-18"><a href="vizualizing-the-data.html#cb37-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>,<span class="at">face =</span> <span class="st">&#39;bold&#39;</span>),</span>
<span id="cb37-19"><a href="vizualizing-the-data.html#cb37-19" aria-hidden="true" tabindex="-1"></a>          <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&#39;white&#39;</span>,</span>
<span id="cb37-20"><a href="vizualizing-the-data.html#cb37-20" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">size =</span> <span class="dv">1</span>,</span>
<span id="cb37-21"><a href="vizualizing-the-data.html#cb37-21" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">fill =</span> <span class="cn">NA</span>))</span>
<span id="cb37-22"><a href="vizualizing-the-data.html#cb37-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb37-23"><a href="vizualizing-the-data.html#cb37-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-24"><a href="vizualizing-the-data.html#cb37-24" aria-hidden="true" tabindex="-1"></a>plots <span class="ot">&lt;-</span> sf_data <span class="sc">%&gt;%</span> </span>
<span id="cb37-25"><a href="vizualizing-the-data.html#cb37-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(regional_sents[,<span class="fu">c</span>(<span class="st">&#39;Provinz&#39;</span>, <span class="st">&#39;sentiment&#39;</span>)],<span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;NAME_LATN&#39;</span> <span class="ot">=</span> <span class="st">&#39;Provinz&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb37-26"><a href="vizualizing-the-data.html#cb37-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CNTR_CODE) <span class="sc">%&gt;%</span></span>
<span id="cb37-27"><a href="vizualizing-the-data.html#cb37-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_split</span>() <span class="sc">%&gt;%</span> <span class="co"># split for two plots</span></span>
<span id="cb37-28"><a href="vizualizing-the-data.html#cb37-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">df =</span> ., <span class="at">titles =</span> <span class="fu">c</span>(<span class="st">&#39;Germany about Sweden&#39;</span>, <span class="st">&#39;Sweden about Germany&#39;</span>)) <span class="sc">%&gt;%</span>  <span class="co"># change to nested list for pmap</span></span>
<span id="cb37-29"><a href="vizualizing-the-data.html#cb37-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pmap</span>(<span class="sc">~</span><span class="fu">reg_sent_plot</span>(..<span class="dv">1</span>,<span class="at">legend =</span> F,<span class="at">title =</span> ..<span class="dv">2</span>)) <span class="co"># build list of plots</span></span>
<span id="cb37-30"><a href="vizualizing-the-data.html#cb37-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-31"><a href="vizualizing-the-data.html#cb37-31" aria-hidden="true" tabindex="-1"></a>legend <span class="ot">&lt;-</span> cowplot<span class="sc">::</span><span class="fu">get_legend</span>(<span class="fu">reg_sent_plot</span>(<span class="fu">mutate</span>(sf_data,<span class="at">sentiment =</span> <span class="dv">0</span>),<span class="at">legend =</span> T)) <span class="co"># generate legend</span></span>
<span id="cb37-32"><a href="vizualizing-the-data.html#cb37-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-33"><a href="vizualizing-the-data.html#cb37-33" aria-hidden="true" tabindex="-1"></a>cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(</span>
<span id="cb37-34"><a href="vizualizing-the-data.html#cb37-34" aria-hidden="true" tabindex="-1"></a>  cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(<span class="at">plotlist =</span> plots),</span>
<span id="cb37-35"><a href="vizualizing-the-data.html#cb37-35" aria-hidden="true" tabindex="-1"></a>  legend,</span>
<span id="cb37-36"><a href="vizualizing-the-data.html#cb37-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">rel_widths =</span>  <span class="fu">c</span>(<span class="dv">4</span>,.<span class="dv">6</span>)</span>
<span id="cb37-37"><a href="vizualizing-the-data.html#cb37-37" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-35"></span>
<img src="DataVizAssignment_files/figure-html/unnamed-chunk-35-1.png" alt="Mean sentiment per region as detected in the mainstream-news articles about the respective other country." width="672" />
<p class="caption">
Figure 3: Mean sentiment per region as detected in the mainstream-news articles about the respective other country.
</p>
</div>
<p>Since the resulting sentiments are really unexpected, weâ€™ll try a qualitative approach.
We decided to create some wordclouds to get a better impression of the reportsâ€™ tonality.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="vizualizing-the-data.html#cb38-1" aria-hidden="true" tabindex="-1"></a>wc_data <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&#39;./../data/wordcloud_data.rds&#39;</span>)</span>
<span id="cb38-2"><a href="vizualizing-the-data.html#cb38-2" aria-hidden="true" tabindex="-1"></a>wordcloud <span class="ot">&lt;-</span> <span class="cf">function</span>(wc_data,country, title){</span>
<span id="cb38-3"><a href="vizualizing-the-data.html#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># generate temp. masks for wordclouds</span></span>
<span id="cb38-4"><a href="vizualizing-the-data.html#cb38-4" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> <span class="fu">get_eurostat_geospatial</span>(<span class="at">resolution =</span> <span class="st">&#39;10&#39;</span>,</span>
<span id="cb38-5"><a href="vizualizing-the-data.html#cb38-5" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">nuts =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-6"><a href="vizualizing-the-data.html#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(CNTR_CODE <span class="sc">%in%</span> <span class="fu">c</span>(country)) <span class="sc">%&gt;%</span> </span>
<span id="cb38-7"><a href="vizualizing-the-data.html#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb38-8"><a href="vizualizing-the-data.html#cb38-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">fill =</span> <span class="st">&#39;black&#39;</span>, <span class="at">color =</span> <span class="st">&#39;black&#39;</span>) <span class="sc">+</span></span>
<span id="cb38-9"><a href="vizualizing-the-data.html#cb38-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_sf</span>(<span class="at">crs =</span> <span class="fu">st_crs</span>(<span class="st">&quot;+proj=moll&quot;</span>)) <span class="sc">+</span></span>
<span id="cb38-10"><a href="vizualizing-the-data.html#cb38-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>()</span>
<span id="cb38-11"><a href="vizualizing-the-data.html#cb38-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-12"><a href="vizualizing-the-data.html#cb38-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="st">&#39;temp.png&#39;</span>, <span class="at">plot =</span> p)</span>
<span id="cb38-13"><a href="vizualizing-the-data.html#cb38-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-14"><a href="vizualizing-the-data.html#cb38-14" aria-hidden="true" tabindex="-1"></a>  img <span class="ot">&lt;-</span> png<span class="sc">::</span><span class="fu">readPNG</span>(<span class="st">&#39;temp.png&#39;</span>)</span>
<span id="cb38-15"><a href="vizualizing-the-data.html#cb38-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-16"><a href="vizualizing-the-data.html#cb38-16" aria-hidden="true" tabindex="-1"></a>  dummy <span class="ot">&lt;-</span> <span class="fu">colSums</span>(img[,,<span class="dv">1</span>]) <span class="sc">!=</span> <span class="fu">max</span>(<span class="fu">colSums</span>(img[,,<span class="dv">1</span>]))</span>
<span id="cb38-17"><a href="vizualizing-the-data.html#cb38-17" aria-hidden="true" tabindex="-1"></a>  img <span class="ot">&lt;-</span> img[,dummy,]</span>
<span id="cb38-18"><a href="vizualizing-the-data.html#cb38-18" aria-hidden="true" tabindex="-1"></a>  dummy <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(img[,,<span class="dv">1</span>]) <span class="sc">!=</span> <span class="fu">max</span>(<span class="fu">rowSums</span>(img[,,<span class="dv">1</span>]))</span>
<span id="cb38-19"><a href="vizualizing-the-data.html#cb38-19" aria-hidden="true" tabindex="-1"></a>  img <span class="ot">&lt;-</span> img[dummy,,] <span class="co"># cut the image to size</span></span>
<span id="cb38-20"><a href="vizualizing-the-data.html#cb38-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-21"><a href="vizualizing-the-data.html#cb38-21" aria-hidden="true" tabindex="-1"></a>  wc <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(wc_data,<span class="fu">aes</span>(<span class="at">label =</span> translation, <span class="at">size =</span> n, <span class="at">color =</span> sentiment)) <span class="sc">+</span> </span>
<span id="cb38-22"><a href="vizualizing-the-data.html#cb38-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text_wordcloud</span>(<span class="at">mask =</span> img,<span class="at">rm_outside =</span> T) <span class="sc">+</span></span>
<span id="cb38-23"><a href="vizualizing-the-data.html#cb38-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_gradient2</span>(<span class="at">low =</span> scales<span class="sc">::</span><span class="fu">muted</span>(<span class="st">&#39;red&#39;</span>), </span>
<span id="cb38-24"><a href="vizualizing-the-data.html#cb38-24" aria-hidden="true" tabindex="-1"></a>                         <span class="at">mid =</span> <span class="st">&#39;grey&#39;</span>,</span>
<span id="cb38-25"><a href="vizualizing-the-data.html#cb38-25" aria-hidden="true" tabindex="-1"></a>                         <span class="at">high =</span> scales<span class="sc">::</span><span class="fu">muted</span>(<span class="st">&#39;blue&#39;</span>),</span>
<span id="cb38-26"><a href="vizualizing-the-data.html#cb38-26" aria-hidden="true" tabindex="-1"></a>                         <span class="at">na.value =</span> <span class="st">&#39;darkgrey&#39;</span>,</span>
<span id="cb38-27"><a href="vizualizing-the-data.html#cb38-27" aria-hidden="true" tabindex="-1"></a>                         <span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>,<span class="dv">5</span>)) <span class="sc">+</span></span>
<span id="cb38-28"><a href="vizualizing-the-data.html#cb38-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> title) <span class="sc">+</span></span>
<span id="cb38-29"><a href="vizualizing-the-data.html#cb38-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>(<span class="at">base_family =</span> <span class="st">&#39;lato&#39;</span>, <span class="at">base_size =</span> <span class="dv">20</span>) <span class="sc">+</span> </span>
<span id="cb38-30"><a href="vizualizing-the-data.html#cb38-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>,<span class="at">face =</span> <span class="st">&#39;bold&#39;</span>)) <span class="co"># plot the image</span></span>
<span id="cb38-31"><a href="vizualizing-the-data.html#cb38-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-32"><a href="vizualizing-the-data.html#cb38-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">file.remove</span>(<span class="st">&#39;temp.png&#39;</span>) <span class="co"># remove the temp. mask</span></span>
<span id="cb38-33"><a href="vizualizing-the-data.html#cb38-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-34"><a href="vizualizing-the-data.html#cb38-34" aria-hidden="true" tabindex="-1"></a>  wc</span>
<span id="cb38-35"><a href="vizualizing-the-data.html#cb38-35" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-36"><a href="vizualizing-the-data.html#cb38-36" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb38-37"><a href="vizualizing-the-data.html#cb38-37" aria-hidden="true" tabindex="-1"></a>ger_wc <span class="ot">&lt;-</span> wc_data <span class="sc">%&gt;%</span> </span>
<span id="cb38-38"><a href="vizualizing-the-data.html#cb38-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&#39;Germany&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-39"><a href="vizualizing-the-data.html#cb38-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb38-40"><a href="vizualizing-the-data.html#cb38-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">750</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-41"><a href="vizualizing-the-data.html#cb38-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">wordcloud</span>(<span class="at">country =</span> <span class="st">&#39;DE&#39;</span>,</span>
<span id="cb38-42"><a href="vizualizing-the-data.html#cb38-42" aria-hidden="true" tabindex="-1"></a>            <span class="at">title =</span> <span class="st">&#39;Germany about Sweden&#39;</span>)</span>
<span id="cb38-43"><a href="vizualizing-the-data.html#cb38-43" aria-hidden="true" tabindex="-1"></a>swe_wc <span class="ot">&lt;-</span> wc_data <span class="sc">%&gt;%</span> </span>
<span id="cb38-44"><a href="vizualizing-the-data.html#cb38-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&#39;Sweden&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-45"><a href="vizualizing-the-data.html#cb38-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb38-46"><a href="vizualizing-the-data.html#cb38-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">750</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-47"><a href="vizualizing-the-data.html#cb38-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">wordcloud</span>(<span class="at">country =</span> <span class="st">&#39;SE&#39;</span>,</span>
<span id="cb38-48"><a href="vizualizing-the-data.html#cb38-48" aria-hidden="true" tabindex="-1"></a>            <span class="at">title =</span> <span class="st">&#39;Sweden about Germany&#39;</span>)</span>
<span id="cb38-49"><a href="vizualizing-the-data.html#cb38-49" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(ger_wc,grid<span class="sc">::</span><span class="fu">rectGrob</span>(<span class="at">gp =</span> grid<span class="sc">::</span><span class="fu">gpar</span>(<span class="at">lwd =</span> <span class="dv">0</span>)), swe_wc, <span class="at">rel_widths =</span> <span class="fu">c</span>(<span class="dv">1</span>,.<span class="dv">2</span>,<span class="dv">1</span>), <span class="at">nrow =</span> <span class="dv">1</span>)</span>
<span id="cb38-50"><a href="vizualizing-the-data.html#cb38-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-51"><a href="vizualizing-the-data.html#cb38-51" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&#39;./../imgs/wordclouds.png&#39;</span>, p,<span class="at">width =</span> <span class="dv">4</span>, <span class="at">height =</span> <span class="dv">4</span>,<span class="at">units =</span> <span class="st">&#39;in&#39;</span>) <span class="co"># higher resolution</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-37"></span>
<img src="imgs/wordclouds.png" alt="Most commonly used terms in the mainstream-news reporting about the respective other country. The color codes the sentiment if any could be associated." width="600" />
<p class="caption">
Figure 4: Most commonly used terms in the mainstream-news reporting about the respective other country. The color codes the sentiment if any could be associated.
</p>
</div>
<p>First of all, the sentiment analysis did not work well. Though a handful of sentimental terms as died, virus, infected, epidemic, disease, debt or hurt have got a sensible sentiment assigned, some words as â€˜trumpâ€™ have clearly been misjudged. A lot of the words used in the description of the pandemic are of special vocabulary, such as risk area and special path and were not assigned any sentiment.</p>
<p>Regarding the word-frequencies in the wordclouds, the most used words in German news articles about Sweden have been â€˜risk area,â€™ â€˜trump,â€™ â€˜tegnell,â€™ â€˜macronâ€™ and â€˜special path.â€™
Especially the terms â€˜risk areaâ€™ and â€˜special pathâ€™ are in the context of the Pandemic of interest. Although the articles seem to not all be exclusively about Sweden, â€˜risk areaâ€™ and â€˜special pathâ€™ are two distinct phrases that show the tonality of the reports about Sweden.</p>
<p>The Swedish news articles about Germany in the contrary used â€˜sweden,â€™ â€˜denmark,â€™ â€˜germanâ€™ and â€˜europeâ€™ the most, which shows that Germany was rather mentioned in a European context then on itâ€™s own. Other than the German wordcloud, the Swedish one mentions more pandemic specific words such as â€˜died,â€™ â€˜virus,â€™ â€˜infected,â€™ â€˜epidemic,â€™ â€˜disease,â€™ â€˜debtâ€™ or â€˜hurt.â€™ This could also be a result of our rather radical cleaning though, since the high TF-IDF-cutoff could have led to the removal of pandemic-specific terminology that was mentioned in nearly every German article.</p>
<p>Just looking at the German terms before the cleaning and translation shows a different result:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="vizualizing-the-data.html#cb39-1" aria-hidden="true" tabindex="-1"></a>german_dtm <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&#39;./../data/german_dtm.rds&#39;</span>) <span class="co"># non-cleaned terms</span></span>
<span id="cb39-2"><a href="vizualizing-the-data.html#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="vizualizing-the-data.html#cb39-3" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">get_eurostat_geospatial</span>(<span class="at">resolution =</span> <span class="st">&#39;10&#39;</span>,</span>
<span id="cb39-4"><a href="vizualizing-the-data.html#cb39-4" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">nuts =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-5"><a href="vizualizing-the-data.html#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(CNTR_CODE <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;DE&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-6"><a href="vizualizing-the-data.html#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb39-7"><a href="vizualizing-the-data.html#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="at">fill =</span> <span class="st">&#39;black&#39;</span>, <span class="at">color =</span> <span class="st">&#39;black&#39;</span>) <span class="sc">+</span></span>
<span id="cb39-8"><a href="vizualizing-the-data.html#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_sf</span>(<span class="at">crs =</span> <span class="fu">st_crs</span>(<span class="st">&quot;+proj=moll&quot;</span>)) <span class="sc">+</span></span>
<span id="cb39-9"><a href="vizualizing-the-data.html#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>()</span>
<span id="cb39-10"><a href="vizualizing-the-data.html#cb39-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb39-11"><a href="vizualizing-the-data.html#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="st">&#39;temp.png&#39;</span>, <span class="at">plot =</span> p)</span>
<span id="cb39-12"><a href="vizualizing-the-data.html#cb39-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb39-13"><a href="vizualizing-the-data.html#cb39-13" aria-hidden="true" tabindex="-1"></a>  img <span class="ot">&lt;-</span> png<span class="sc">::</span><span class="fu">readPNG</span>(<span class="st">&#39;temp.png&#39;</span>)</span>
<span id="cb39-14"><a href="vizualizing-the-data.html#cb39-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb39-15"><a href="vizualizing-the-data.html#cb39-15" aria-hidden="true" tabindex="-1"></a>  dummy <span class="ot">&lt;-</span> <span class="fu">colSums</span>(img[,,<span class="dv">1</span>]) <span class="sc">!=</span> <span class="fu">max</span>(<span class="fu">colSums</span>(img[,,<span class="dv">1</span>]))</span>
<span id="cb39-16"><a href="vizualizing-the-data.html#cb39-16" aria-hidden="true" tabindex="-1"></a>  img <span class="ot">&lt;-</span> img[,dummy,]</span>
<span id="cb39-17"><a href="vizualizing-the-data.html#cb39-17" aria-hidden="true" tabindex="-1"></a>  dummy <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(img[,,<span class="dv">1</span>]) <span class="sc">!=</span> <span class="fu">max</span>(<span class="fu">rowSums</span>(img[,,<span class="dv">1</span>]))</span>
<span id="cb39-18"><a href="vizualizing-the-data.html#cb39-18" aria-hidden="true" tabindex="-1"></a>  img <span class="ot">&lt;-</span> img[dummy,,] <span class="co"># cut the image to size</span></span>
<span id="cb39-19"><a href="vizualizing-the-data.html#cb39-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-20"><a href="vizualizing-the-data.html#cb39-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-21"><a href="vizualizing-the-data.html#cb39-21" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">words =</span> german_dtm<span class="sc">$</span>dimnames<span class="sc">$</span>cols,</span>
<span id="cb39-22"><a href="vizualizing-the-data.html#cb39-22" aria-hidden="true" tabindex="-1"></a>                 <span class="at">n =</span> <span class="fu">col_sums</span>(german_dtm)) <span class="sc">%&gt;%</span></span>
<span id="cb39-23"><a href="vizualizing-the-data.html#cb39-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-24"><a href="vizualizing-the-data.html#cb39-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">1000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-25"><a href="vizualizing-the-data.html#cb39-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">label =</span> words, <span class="at">size =</span> n)) <span class="sc">+</span> </span>
<span id="cb39-26"><a href="vizualizing-the-data.html#cb39-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text_wordcloud</span>(<span class="at">mask =</span> img,<span class="at">rm_outside =</span> T, <span class="at">color =</span> <span class="st">&#39;darkgrey&#39;</span>) <span class="sc">+</span></span>
<span id="cb39-27"><a href="vizualizing-the-data.html#cb39-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>(<span class="at">base_family =</span> <span class="st">&#39;lato&#39;</span>, <span class="at">base_size =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb39-28"><a href="vizualizing-the-data.html#cb39-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Words used by German newspapers&#39;</span>) <span class="sc">+</span></span>
<span id="cb39-29"><a href="vizualizing-the-data.html#cb39-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>,<span class="at">face =</span> <span class="st">&#39;bold&#39;</span>))</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-38"></span>
<img src="DataVizAssignment_files/figure-html/unnamed-chunk-38-1.png" alt="Most commonly used terms in the German mainstream-news reporting about Sweden before filtering and translation." width="672" />
<p class="caption">
Figure 5: Most commonly used terms in the German mainstream-news reporting about Sweden before filtering and translation.
</p>
</div>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="vizualizing-the-data.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">file.remove</span>(<span class="st">&#39;temp.png&#39;</span>) <span class="co"># remove the temp. mask</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>The cleaning has removed a good portion of pandemic-specific terms as â€˜coronavirus,â€™ â€˜infektion,â€™ â€˜covidâ€™ and â€˜pandemi.â€™ We conducted the step for a reason though, the aim was to be able to improve the discrimination between topical clusters. As can also be seen by the non-cleaned wordcloud, the procedure did also remove meaningless terms like â€˜dassâ€™ and â€˜mehr.â€™ So though our approach was meant in the right way, we went a bit too far.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-acquisition.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
